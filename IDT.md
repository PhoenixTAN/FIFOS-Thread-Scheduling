# INTERRUPT DESCRIPTOR TABLE (IDT)

## Reference
https://wiki.osdev.org/Interrupt_Descriptor_Table

## Overview

![alt text](./images/IDTR-IDT.png)

![alt text](./images/Interrupt-Procedure-Call.png)

## Software interrupts in x86
https://wiki.osdev.org/Exceptions

### Exceptions
#### Faults
These can be corrected and the program may continue as if nothing happened.
- Example: Divide-by-zero Error, Page-Fault
#### Traps
Traps are reported immediately after the execution of the trapping instruction.
- Example: Breakpoints.
#### Abort
Some severe unrecoverable error.

### User-defined
- Generated by INT instruction: Defined by the OS or the firmware (eg: BIOS)
- Maskable 可以被CPU屏蔽

## Hardware interrupts
### IRQs: An external device requires CPU's attention.
- Examples: System Timer (IRQ-0), Keyboard interrupt
- Maskable 可以被CPU屏蔽

## When does the CPU receive interrupt？
- Interrupts are enable in EFLAGS Register.
  - We can modify it by **cli** or **sti** or **popf** instructions
- There is a pending IRQ signal or the INT instruction is issued
- There is a valid **Interrupt Descriptor** entry corresponding to the interrupt number:
  - An interrupt descriptor tells the CPU what to do (Where to jump in the code)
  - Interrupt descriptor are defined by
    - The Interrupt Vector Table (IVT) in **Real-mode** (remember the BIOS calls?)
    - The Interrupt Descriptor Table (IDT) in **Protected-mode**

